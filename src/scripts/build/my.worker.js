var f=class{constructor(){this.tree={};this.proxy={};this.refs={};this.imports={};this.forms={};this.pure={}}},y=(t,s)=>{typeof s=="string"&&(s=s.split("."));let o=s.shift();return o?y(t[o],s):t},h=(t,s,o)=>{typeof s=="string"&&(s=s.split("."));let e=s.shift();e&&(s.length>1?y(t[e],s):t[e]=o)},a=class extends f{constructor(){super();this.proxy_callback=(o,e,l,n)=>{let r=document.querySelectorAll(`[proxy_data="${l}"]`);console.log(r,l),r.forEach(i=>{i.textContent=y(this.proxy,i.getAttribute("proxy_data")||"")})}}set_imports(){document.querySelectorAll("script[ref_href_lib]").forEach(e=>{this.imports[e.getAttribute("ref_href_lib")||""]=window[e.getAttribute("name_href_lib")||""]})}deep_proxy(o,e){let l={get:(n,r,i)=>{let c=Reflect.get(n,r,i);return typeof c=="object"&&c!==null?this.deep_proxy(c,e):c},set:(n,r,i)=>(h(n,r,i),console.log(n,r,i),e(o,n,r,i),!0)};return new Proxy(this.proxy,l)}set_refs(){document.querySelectorAll("[ref]").forEach(e=>{this.refs[e.getAttribute("ref")||""]=e})}set_forms(){document.querySelectorAll("div[form]").forEach(e=>{let l=e.getAttribute("form")||"_";this.forms[l]={},e.querySelectorAll("input[data-input]").forEach(r=>{let i=r.getAttribute("name")||"_",c=r.getAttribute("input-proxy");this.forms[l][i]=r,c&&(this.proxy[c]=r.value,r.addEventListener("input",()=>{c&&(this.proxy[c]=r.value)}))})})}init(){return this.set_imports(),this.set_refs(),this.proxy=this.deep_proxy(this.proxy,this.proxy_callback),this.set_forms(),this}$on_event(o,e,l){let n=document.querySelector(o);this.tree[o]||(this.tree[o]={}),n?.addEventListener(e,()=>{l({self:n,item:this.tree[o],proxy:this.proxy,refs:this.refs,imports:this.imports,forms:this.forms})})}},p=new a().init();window.onload=()=>{};p.$on_event("p[v_d9fbb327]","click",t=>{console.log("pyks"),console.log(t.item),console.log(t.self),console.log(t.proxy),t.proxy.little="ok",console.log(t.imports.crypto.SHA256("Message").toString()),t.proxy.tg="10"});p.$on_event("input[v_d18e6ab0]","input",()=>{console.log("dupa")});p.$on_event("p[v_7d799876]","click",t=>{console.log("pyk"),console.log(t),console.log(t.item),console.log(t.proxy)});
//# sourceMappingURL=my.worker.js.map
